const urlParams = new URLSearchParams(window.location.search);
const slug = urlParams.get('slug');

if (slug) {
    // åŒæ™‚æŠ“å– JSON (æ‹¿æ­£ç¢ºæ¨™é¡Œ) å’Œ MD (æ‹¿æ­£ç¢ºå…§æ–‡)
    Promise.all([
        fetch('posts/posts.json').then(res => res.json()),
        fetch(`posts/${slug}.md`).then(res => res.text())
    ]).then(([posts, mdText]) => {
        // ðŸ’¡ é—œéµï¼šå¾ž JSON ä¸­æ‰¾å‡º slug åŒ¹é…çš„é‚£ä¸€ç­†
        const currentPost = posts.find(p => p.slug === slug);
        
        if (currentPost) {
            document.getElementById('post-title').innerText = currentPost.title;
            document.getElementById('post-date').innerText = currentPost.date;
        }

        const cleanMd = mdText.replace(/^---[\s\S]+?---/, '');
        document.getElementById('post-content').innerHTML = marked.parse(cleanMd);
    });
}
